webpackJsonp([1],{0:function(t,e){},1:function(t,e){},"4VjI":function(t,e){},"6rGA":function(t,e){},"7yyx":function(t,e){},"8Vbn":function(t,e){},B85T:function(t,e){},DoCE:function(t,e){},E2SV:function(t,e){},"Fo+e":function(t,e){},JFZg:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={};n.d(a,"SET_ACCESS_TOKEN",function(){return De}),n.d(a,"SET_AUTH_ERROR",function(){return Ce}),n.d(a,"CLEAR_ACCESS_TOKEN",function(){return Ee}),n.d(a,"ADD_AUTH_ERRORS",function(){return xe}),n.d(a,"GET_ALL_SETTINGS",function(){return Ie}),n.d(a,"GET_METADATA_SETTINGS",function(){return we}),n.d(a,"UPDATE_ALL_SETTINGS",function(){return Re}),n.d(a,"SET_CURRENT_LANGUAGE",function(){return Te}),n.d(a,"GET_LANGUAGES_LIST",function(){return Fe}),n.d(a,"SET_CURRENT_WINDOW",function(){return Me}),n.d(a,"SET_WINDOW_SCHEMA",function(){return Ve}),n.d(a,"SET_DYNAMIC_ERROR",function(){return $e}),n.d(a,"SET_META_DATA",function(){return Ae}),n.d(a,"GET_ENTITY_DATA",function(){return Ue});var i={};n.d(i,"test",function(){return Pe});var s={};n.d(s,"demoGetter",function(){return Le});var o=n("7+uW"),r=n("NYxO"),l={computed:Object(r.b)(["allSettings","getAvailableLanguages","authorized","getLanguage"]),methods:{test:function(){},setLanguage:function(){this.$store.dispatch("setCurrentLanguage",{language:this.language.id})}},data:function(){return{language:{id:0}}},template:'<div class="language_config" v-if="language">\n              <select v-model="language.id" v-on:change="setLanguage()">\n                <option\n                  v-for="item in getAvailableLanguages"\n                  v-bind:value=\'item.id\'>{{item.title}}\n                </option>\n              </select>\n            </div>',created:function(){if(this.authorized)if(this.getLanguage)this.language=this.getLanguage;else{var t=this;this.$store.dispatch("getLanguagesList").then(function(){t.$store.dispatch("getCurrentLanguage").then(function(){t.language=t.getLanguage})})}}},c=n("VU/8")(l,null,!1,null,null,null).exports,u={computed:Object(r.b)(["authorized"]),components:{language:c},methods:{logout:function(){localStorage.removeItem("vuex"),this.$router.go("/")}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.authorized?n("button",{staticClass:"logout",on:{click:function(e){t.logout()}}},[t._v("Logout")]):t._e(),t._v(" "),n("router-view")],1)},staticRenderFns:[]};var h=n("VU/8")(u,d,!1,function(t){n("PssV")},null,null).exports,m=n("/ocq"),f={methods:{authTest:function(){console.log("mixin")}}},p={computed:Object(r.b)(["getToken","authorized","is_error","auth_error"]),data:function(){return{auth:{email:"test@mail.com",password:"test"}}},mixins:[f],methods:{onSubmit:function(){var t=this;this.$store.dispatch("auth",{email:this.auth.email,password:this.auth.password}).then(function(e){t.is_error||t.$store.dispatch("afterSuccessAuth").then(function(){t.$router.push({name:"Main"})})})}},created:function(){this.authTest()}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth"},[n("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.email,expression:"auth.email"}],attrs:{type:"text",placeholder:"email",required:""},domProps:{value:t.auth.email},on:{input:function(e){e.target.composing||t.$set(t.auth,"email",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.password,expression:"auth.password"}],attrs:{type:"password",placeholder:"password",required:""},domProps:{value:t.auth.password},on:{input:function(e){e.target.composing||t.$set(t.auth,"password",e.target.value)}}}),t._v(" "),n("button",{attrs:{type:"submit"}},[t._v("Login")])])])},staticRenderFns:[]},v=n("VU/8")(p,g,!1,null,null,null).exports,y={computed:Object(r.b)(["getToken","authorized","is_error","auth_error"]),name:"Auth",data:function(){return{}},components:{auth:v},mounted:function(){}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("auth"),this._v("\n  "+this._s(this.auth_error)+"\n")],1)},staticRenderFns:[]};var _=n("VU/8")(y,b,!1,function(t){n("6rGA")},"data-v-19e226d9",null).exports,k=n("//Fk"),j=n.n(k),S=function(t,e){return o.default.http.get(t,e).then(function(t){return j.a.resolve(t.body.data)}).catch(function(t){return j.a.reject(t)})},O=function(t,e){return o.default.http.post(t,e).then(function(t){return j.a.resolve(t.body.data)}).catch(function(t){return j.a.reject(t)})},D={name:"Main",data:function(){return{content:null}},components:{language:c},methods:{testRequest:function(){var t=this;S("auth/user").then(function(e){t.content=e.user})}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"hello"},[n("language"),t._v(" "),n("h1",[t._v("Welcome to Dashboard")]),t._v(" "),n("router-link",{attrs:{to:{path:"page/maincrm"}}},[t._v("Main Page")]),t._v(" "),n("router-link",{attrs:{to:{path:"chat"}}},[t._v("Chat")]),t._v(" "),n("p",[t._v(t._s(t.content))])],1)])},staticRenderFns:[]};var E=n("VU/8")(D,C,!1,function(t){n("a45g")},"data-v-5e2370da",null).exports,x={props:{label:{type:String,default:""},type:{type:String,default:"text"},value:{type:String,default:""}},template:'<div class="form-group">\n      <label>{{label}} </label>\n        <div>\n          <input\n          v-bind:value="value"\n          v-on:input="updateValue($event.target.value)"\n          class="input" />\n        </div>\n        </div>',methods:{updateValue:function(t){this.$emit("input",t)}}},I=n("VU/8")(x,null,!1,null,null,null).exports,w={props:{label:{type:String,default:""},type:{type:String,default:"text"},multiple:{type:Boolean,default:!1},value:{type:[Array,Number,String],default:function(){return this.multiple?[]:""}},items:{type:Array,default:function(){return[]}}},data:function(){return{localValue:this.value}},template:'<div class="form-group"><label>{{label}}</label>\n      <div>\n          <select v-model="model" :multiple="multiple">\n            <option disabled value=""></option>\n            <option\n            v-for="item in items"\n            v-bind:value=\'item.id\'>\n            {{item.value}}\n            </option>\n          </select>\n      </div>\n      </div>',computed:{model:{get:function(){return this.value?this.value:[]},set:function(t){this.$emit("input",t)}}}},R=n("VU/8")(w,null,!1,null,null,null).exports,T={props:{label:{type:String,default:""},type:{type:String,default:"boolean"},items:{type:Array,default:function(){return[]}},value:{type:[Number,String],default:0}},template:'<div class="form-group">\n      <label>{{label}}</label>\n        <div v-for="(item,key) in  items">\n          <input\n          :id="key"\n          v-bind:value="item.id"\n          v-model="model"\n          class="input"\n          type="radio"\n          />\n          <label :for="key">{{item.value}}</label>\n\n        </div>\n        </div>',computed:{model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},F=n("VU/8")(T,null,!1,null,null,null).exports,M={computed:Object(r.b)(["metadataSettings","allSettings"]),data:function(){return{schema:null,groups:[],fields:[],enums:[],formData:{}}},components:{einput:I,eselect:R,eradio:F},methods:{parseMetaData:function(){this.groups=this.schema.groups,this.fields=this.schema.fields,this.enums=this.schema.enum},getSettings:function(){this.formData=this.allSettings},updateSettings:function(){var t=this;this.$store.dispatch("updateSettings",this.formData).then(function(e){t.parseMetaData(),t.getSettings()})}},created:function(){var t=this;this.$store.dispatch("getSettingsMetaData").then(function(){t.schema=t.metadataSettings.settings,t.parseMetaData(),t.getSettings()})}},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings"},[n("div",[n("form",{on:{submit:function(e){e.preventDefault(),t.updateSettings(e)}}},[t._l(t.groups,function(e,a){return n("div",{key:a},[n("h3",[t._v(t._s(a))]),t._v(" "),t._l(e,function(e,a){return n("div",{key:a},["text"==t.fields[e].type?n("einput",{attrs:{label:t.fields[e].label},model:{value:t.formData[e],callback:function(n){t.$set(t.formData,e,n)},expression:"formData[field]"}}):t._e(),t._v(" "),"enum"==t.fields[e].type?n("eselect",{attrs:{label:t.fields[e].label,multiple:!!t.fields[e].multiple&&t.fields[e].multiple,items:t.enums[e]},model:{value:t.formData[e],callback:function(n){t.$set(t.formData,e,n)},expression:"formData[field]"}}):t._e(),t._v(" "),"boolean"==t.fields[e].type?n("eradio",{attrs:{label:t.fields[e].label,items:t.enums[e]},model:{value:t.formData[e],callback:function(n){t.$set(t.formData,e,n)},expression:"formData[field]"}}):t._e()],1)})],2)}),t._v(" "),n("button",{attrs:{type:"submit"}},[t._v("Update")])],2)])])},staticRenderFns:[]},$={data:function(){return{}},components:{metadata:n("VU/8")(M,V,!1,null,null,null).exports}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"settings"},[e("metadata")],1)},staticRenderFns:[]},U=n("VU/8")($,A,!1,null,null,null).exports,P={computed:Object(r.b)(["allSettings"]),name:"Settings",data:function(){return{}},components:{settings:U,language:c},methods:{}},L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"hello"},[e("language"),this._v(" "),e("h2",[this._v("Settings")]),this._v(" "),e("settings")],1)])},staticRenderFns:[]};var B=n("VU/8")(P,L,!1,function(t){n("4VjI")},"data-v-1d36968c",null).exports,N={name:"dynamicMenu",computed:Object(r.b)(["getSchema","getMetaDataErrors"]),data:function(){return{}},props:{schema:{type:Object,default:function(){return{}}}},components:{dynamicMenu:q},methods:{isSubMenu:function(t){return!(!t.action||"nav"!==t.action.type||!t.action.linktype)}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",t._l(t.schema.items,function(e,a){return n("li",{key:a},[e.action?t._e():n("a",[t._v(t._s(e.title))]),t._v(" "),t.isSubMenu(e)?n("router-link",{attrs:{to:e.action.link}},[t._v(t._s(e.title))]):t._e(),t._v(" "),n("dynamicMenu",{attrs:{schema:e}})],1)}))},staticRenderFns:[]};var q=n("VU/8")(N,z,!1,function(t){n("8Vbn")},"data-v-7a71c2f0",null).exports,W=n("pFYg"),G=n.n(W),H=n("gRE1"),X=n.n(H),J={methods:{fetchFromObject:function(t,e){if(void 0===t)return!1;var n=e.indexOf(".");return n>-1?t[e.substring(0,n)]?this.fetchFromObject(t[e.substring(0,n)],e.substr(n+1)):"":null==t?"":t[e]},matchVariables:function(t){return"string"!=typeof t?"":t.match(/\$([a-z0-9._]+)\b/g)},fetchValueByMetaData:function(t,e,n){var a=this;if(n.fields[e]){if("relation"!==n.fields[e].type)return this.fetchFromObject(t,e);var i="";if(n.relations[e]&&n.relations[e].short_view){var s=n.relations[e].short_view,o=this.matchVariables(s);return i=s,o.forEach(function(n){var s=a.fetchFromObject(t,e+"."+n.replace("$",""));if(void 0!==s)i=i.replace(n,s);else{var o=a.fetchFromObject(t,e+".i18n."+n.replace("$",""));void 0!==o&&(i=i.replace(n,o))}}),i}}else{var r=this.matchVariables(e);r.length&&r.forEach(function(n){var i=a.fetchFromObject(t,n.replace("$",""));if(i)e=e.replace(n,i);else if(void 0===i){var s="i18n."+n,o=a.fetchFromObject(t,s.replace("$",""));if(o)return e=e.replace(n,o)}})}return e},parseUrl:function(t){var e=this.URLToArray(t),n=t,a=t.match(/\?([a-z0-9=]+)\b/g);return a?(a.forEach(function(t){n=n.replace(t,"")}),n+"/"+X()(e).join("/")):""},URLToArray:function(t){var e,n,a,i,s={};for(a=0,i=(e=t.split("&")).length;a<i;a++)s[(n=e[a].split("="))[0]]=n[1];return s},searchProperty:function(t,e){if(-1===e.indexOf("."))return 0!==e.length?e:null;var n=this.fetchFromObject(t,e);if(""===n){var a=e.substring(e.indexOf(".")+1);return"id"===a?e:this.searchProperty(t,a)}return n&&"object"===(void 0===n?"undefined":G()(n))&&n.id?e+".id":e},setValueToObject:function(t,e,n){if(void 0===t)return!1;var a=e.indexOf(".");return a>-1?t[e.substring(0,a)]?this.setValueToObject(t[e.substring(0,a)],e.substr(a+1),n):"":null==t?"":(t[e]=n,t[e])},generateEmptyObject:function(t,e,n){var a=e.split(".");if(a[1]){var i=a[1],s=n.fields[i];s.type&&("i18n"===s.type?(t[s.type]||(t[s.type]={}),t[s.type][i]=""):"relation"===s.type?n.relations[i]&&("single"===n.relations[i].select?t[i]={id:0}:t[i]=[]):t[i]={boolean:null,string:"",text:"",number:0,decimal:0,integer:0}[s.type])}return t},convertDataBeforeSend:function(t){return t.i18n&&"object"===G()(t.i18n)&&(t.i18n=[t.i18n]),t}}},K={name:"dynamiclabel",computed:Object(r.b)(["getSchema","getMetaDataErrors"]),data:function(){return{}},mixins:[J],props:{schema:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{},methods:{parseVars:function(t,e){var n=this.fetchFromObject(t,e);if(!n){var a=e.substring(0,e.lastIndexOf(".")),i=e.substring(e.lastIndexOf(".")+1,e.length);return(n=this.fetchFromObject(t,a+".i18n."+i))||""}}}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.schema.class||t.schema.type?n(t.schema.class?t.schema.class:t.schema.type,{tag:"component"},[t._v(t._s(t.schema.value))]):t._e(),t._v(" "),t.value&&t.options.key?n("span",[t._v(t._s(t.parseVars(t.value,t.options.key)))]):t._e()],1)},staticRenderFns:[]};var Z=n("VU/8")(K,Y,!1,function(t){n("7yyx")},"data-v-3e1b0d31",null).exports,Q=n("Dd8w"),tt=n.n(Q),et={name:"entitylist",mixins:[J],computed:tt()({returnSchema:function(){return null!=this.schema?this.schema:{}}},Object(r.b)(["getMetaData","getDynamicUIData"])),data:function(){return{data:[],metaData:[],entity:null,urls:[]}},props:{schema:{type:Object,default:function(){return{}}}},components:{},methods:{init:function(){if(this.returnSchema.entity&&this.returnSchema["data-source"]){this.entity=this.returnSchema.entity;var t={path:this.returnSchema["data-source"][this.entity],entity:this.entity},e=this;this.$store.dispatch("getWindowMetaData",e.entity).then(function(){console.log(t),e.$http.get(t.path).then(function(t){e.data=t.data.data})})}},parseVars:function(t,e){var n=this,a="";if(t.value)return a=t.value,this.matchVariables(a).forEach(function(t){var i=n.fetchFromObject(n.data[e],t.replace("$",""));a=a.replace(t,i)}),a;a=t;var i={};return this.getMetaData[this.entity]&&(i=this.getMetaData[this.entity],a=this.fetchValueByMetaData(this.data[e],a,i)),a}},created:function(){this.init()}},nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entity-list"},t._l(t.data,function(e,a){return n("div",{key:a,staticClass:"entity-item"},[n("ul",t._l(t.schema.cells,function(e,i){return n("li",{key:i,class:e.class?e.class:"item"},[e.action?n("a",{attrs:{href:t.parseUrl("/#/page/"+t.parseVars(e.action.link,a))}},[t._v("\r\n         "+t._s(t.parseVars(e,a))+"\r\n        ")]):t._e(),t._v(" "),e.action?t._e():n("span",[t._v("\r\n          "+t._s(t.parseVars(e,a))+"\r\n        ")])])}))])}))},staticRenderFns:[]};var at=n("VU/8")(et,nt,!1,function(t){n("fSLv")},"data-v-00d699e2",null).exports,it=n("woOf"),st=n.n(it),ot=n("fZjL"),rt=n.n(ot),lt=n("kBYy"),ct=n.n(lt),ut=n("RUzx"),dt=n.n(ut),ht=n("zL8q"),mt=n.n(ht),ft=[];o.default.use(ht.DatePicker),o.default.use(ht.TimeSelect),o.default.use(ht.TimePicker),o.default.component("paginate",ct.a);var pt={name:"entitytable",mixins:[J],data:function(){return{isLoad:!1,metaDataFields:[],metaDataRelations:[],entity:null,data:[],paginate:!0,pagination:{page:1,perPage:null,sortBy:""},searchByColumn:[],notSearchable:"",selectOptions:[],predefinedFilters:[],activePredefinedFilters:"",selected:[],setting:[],cells:[],totalItems:null,path:"/backend/api/",dataSource:"",sortSign:"",column:"",filterSelected:[],mainSearch:!1,search:"",valueformat:"yyyy-MM-dd",date:[],groupActions:{},filterStr:"&"}},props:{schema:{type:Object,default:function(){return{}}}},computed:tt()({returnSchema:function(){return this.schema?(this.schema.setting&&this.schema.setting.perPage&&(this.pagination.perPage=this.schema.setting.perPage),this.schema):{}},pages:function(){return this.pagination.perPage?Math.ceil(this.totalItems/this.pagination.perPage):0}},Object(r.b)(["getMetaData","getDynamicUIData"])),components:{Multiselect:dt.a},methods:{clearSelectVal:function(t){this.searchByColumn[t]="",console.log(ft,this.searchByColumn[t])},init:function(){var t=this;if(this.returnSchema.entity&&this.returnSchema["data-source"]){this.entity=this.returnSchema.entity;var e={path:this.returnSchema["data-source"][this.entity],entity:this.entity},n=this;this.entity&&(this.getMetaData[this.entity]||this.$store.dispatch("getWindowMetaData",n.entity).then(function(){console.log(n.getMetaData)})),this.returnSchema.cells&&(this.getMetaData[this.entity]&&(this.metaDataFields=this.getMetaData[this.entity].fields,this.metaDataRelations=this.getMetaData[this.entity].relations),this.cells=this.returnSchema.cells);var a=[],i=[],s=[],o=[],r=[],l=e.path.match(/_with=\s*([^&]+)/);l[1]&&(r=l[1].split(/[\s,]+/)),this.returnSchema.setting&&(this.setting=this.returnSchema.setting,this.setting.search&&(this.mainSearch=!0),this.setting.notSearchBy&&(i=this.setting.notSearchBy),this.setting.notSortable&&(s=this.setting.notSortable),this.setting.hideCells&&(o=this.setting.hideCells),this.setting.list&&(a=this.setting.list),this.setting.groupActions&&(this.groupActions=this.setting.groupActions),this.getNotSearchable(),this.setting.predefinedFilters&&this.getPredefinedFilters()),this.returnSchema.groupActions&&(this.groupActions=this.returnSchema.groupActions),e.path&&this.setDataSource(e.path),this.setCells(i,s,o,r,a),this.getSearchable(i),console.log("settings: ",this.cells),this.$http.get(e.path).then(function(e){t.data=e.data.data,e.data.paginate&&(t.totalItems=e.data.paginate.itemsCount)})}},getPredefinedFilters:function(){var t=this,e=[],n=[];this.entity&&this.$http.get("company_filters?_with=filters&_filters[]=filters.entity-eq="+this.entity).then(function(a){a.data.data&&(e=a.data.data),e.map(function(t,e){t.filters&&(n=n.concat(X()(t.filters)))}),t.predefinedFilters=n})},setCells:function(t,e,n,a,i){var s=this.cells;if(this.metaDataFields){var o=this.metaDataFields,r=this.metaDataRelations,l={},c=[],u="",d="";rt()(o).map(function(t,e){switch(o[t].type){case"boolean":st()(o[t],{field:t},{class:"bool"});break;case"timestamp":st()(o[t],{field:t},{class:"date"});break;case"decimal":st()(o[t],{field:t},{class:"money_short"});break;default:st()(o[t],{field:t})}}),o=X()(o),c=s.filter(this.getDifference(o));for(var h=0;h<o.length;++h){var m=o[h];if(-1===n.indexOf(m.field))if(l=s.find(function(t){return t.field===m.field}),m.searchable&&-1!==t.indexOf(m.field)&&(m.searchable=!1),m.sortable&&-1!==e.indexOf(m.field)&&(m.sortable=!1),l){var f=s.indexOf(l),p=st()(m,s[f]);c.push(p)}else c.push(m)}c.map(function(t,e){r[t.field]&&((u=r[t.field].select)&&(d=r[t.field].path)&&"multiple"!==u&&t.searchable&&("/"===d.charAt(0)&&(d=d.slice(1)),t.relation_path=d,t.relationField=t.field+".id"),-1===a.indexOf(t.field)&&c.splice(e,1))}),this.cells=i?this.sortedCells(c,i):c}},sortedCells:function(t,e){for(var n=[],a=0;a<e.length;a++)for(var i=0;i<t.length;i++)e[a]===t[i].field&&(n[a]=t[i]);return n=n.filter(function(){return!0}),console.log(":",n),n},getDifference:function(t){return function(e){return 0===t.filter(function(t){return t.field===e.field}).length}},parseVars:function(t,e,n){var a="";a=t;var i={};if(this.getMetaData[this.entity]&&(i=this.getMetaData[this.entity]).fields[t]&&(a=this.fetchValueByMetaData(this.data[e],a,i)),void 0!==n)switch(n){case"money_short":var s,o=parseInt(a);s={0:"",1:"K",2:"M",3:"B",4:"T"};for(var r=0;o>100;)o/=1e3,r++;o=parseInt(10*o)/10,a=o+=s[r];break;case"date":a=a.substring(0,10)}return a},toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.data.slice()},toggleItem:function(t){this.selected.includes(t)?this.remove(this.selected,t):this.selected.push(t)},changeSort:function(t){var e=this.pagination.page;this.column=t,this.pagination.sortBy===t?this.sortSign=this.setSortSign(this.sortSign):(this.pagination.sortBy=t,this.sortSign=this.setSortSign(this.sortSign)),this.$http.get(this.dataSource+this.filterStr+"_sort="+this.sortSign+t+"&_page="+e).then(function(t){this.data=X()(t.data.data),this.pagination.page=e})},filterBy:function(t,e,n){switch(t){case"predefined-filter":this.search="";var a=this.filterStr;this.filterSelected[e]=!this.filterSelected[e],n?(-1!==a.indexOf(e)&&(a=a.replace("&"+e,"")),a+="&"!==a.slice(-1)?"&":"",-1!==this.activePredefinedFilters.indexOf(e)&&(this.activePredefinedFilters=this.activePredefinedFilters.replace("&"+e,"")),this.activePredefinedFilters+="&"!==this.activePredefinedFilters.slice(-1)?"&":""):(a+="&"!==a.slice(-1)?"&"+e+"&":e+"&",this.activePredefinedFilters+="&"!==this.activePredefinedFilters.slice(-1)?"&"+e+"&":e+"&");break;case"clear-filter":var i=this.searchByColumn;a="&",rt()(i).forEach(function(t){ft[t]=""}),this.searchByColumn=ft,this.search=this.activePredefinedFilters=this.dateFrom=this.dateTo="",this.filterSelected=[],this.selected=[],this.date=[];break;case"all-fields":a="&_filters[]=",i=ft;var s=this.notSearchable,o=this.search,r=[];o.toString().length>0&&(rt()(i).forEach(function(t){-1===t.indexOf(".")&&-1===s.indexOf(t)&&(a+=t+"-lk=*"+o+"*-!or!-")}),"&_filters[]="!==a&&"-!or!-"===a.slice(-6)?a=a.slice(0,-6)+"&":"&_filters[]="===a?a="&":a+="&"),rt()(i).forEach(function(t){i[t]&&(-1!==t.indexOf(".")?r.push(t):a+="_filters[]="+t+"-lk=*"+i[t]+"*&")}),r.length>0&&r.forEach(function(t){var e=i[t];e.id&&(a+="_filters[]="+t+"-eq="+e.id+"&")}),a+=this.activePredefinedFilters;break;default:a="&",i=this.searchByColumn,r=[],this.search="",rt()(i).forEach(function(t){i[t]&&(-1!==t.indexOf(".")?r.push(t):a+="_filters[]="+t+"-lk=*"+i[t]+"*&")}),r.length>0&&r.forEach(function(t){var e=i[t];e.id&&(a+="_filters[]="+t+"-eq="+e.id+"&")}),a+=this.activePredefinedFilters}if(this.date[0]&&this.date[1]){var l=this.isDate(this.date[0]),c=this.isDate(this.date[1]);!0===l&&!0===c&&(a+="_filters[]=created_at-between="+this.date[0]+","+this.date[1]+"&")}else this.date[0]&&!this.date[1]?!0===(l=this.isDate(this.date[0]))&&(a+="_filters[]=created_at-ge="+this.date[0]+"&"):!this.date[0]&&this.date[1]&&!0===(c=this.isDate(this.date[1]))&&(a+="_filters[]=created_at-le="+this.date[1]+"&");console.log("date",c,l),a=a.replace("&&","&"),this.filterStr=a,console.log("fltr:",this.filterStr),this.$http.get(this.dataSource+this.filterStr+"_page=1").then(function(t){this.data=X()(t.data.data),this.totalItems=t.data.paginate.itemsCount,this.pagination.page=1,this.selected=[]})},towindow:function(t,e){if(void 0!==e){var n=e.id,a=t.match(/\$s*([^&]+)/);null!==a[0]&&(t=t.replace(a[0],n))}console.log(t)},submit:function(t,e){var n=this.getLink(t),a=this.getMethod(t),i=this.getSuccess(t),s=this.setWindowLink(i);0!==n.length&&0!==a.length&&(n=n.replace("$id",e.id),this.setVueRequest(n,a,s,[e]))},submitSelected:function(t){var e=this.getLink(t),n=this.getMethod(t),a=this.getSuccess(t),i=this.setWindowLink(a);if(0!==e.length&&0!==n.length)if(this.selected){var s="";this.selected.forEach(function(t){s+=t.id+","}),s.length>0&&(s=s.slice(0,-1));var o=e.match(/\$s*([^&]+)/);null!==o[0]&&(e=e.replace(o[0],s)),this.setVueRequest(e,n,i,this.selected)}else alert("Not selected!")},clickCallback:function(t){var e=this.sortSign,n=this.column,a=n.length>0?"&_sort="+e+n:"";this.selected=[],this.pagination.page=t,this.$http.get(this.dataSource+this.filterStr+"_page="+this.pagination.page+a).then(function(t){this.data=X()(t.data.data)})},setDataSource:function(t){var e=(t=-1===t.indexOf("?")?t+"?":t).match(/_page=s*([^&]+)/);null!==e[0]&&(t=t.replace(e[0],"")),-1!==t.indexOf("?&")&&(t=t.replace("?&","?")),this.pagination.perPage&&-1===t.indexOf("_limit=")&&(t=t+"&_limit="+this.pagination.perPage),this.dataSource=t},setSortSign:function(t){return t=t.length<1?"-":""},remove:function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},isDate:function(t){return"Invalid Date"!==new Date(t).toString()},isObject:function(t){return t&&"object"===(void 0===t?"undefined":G()(t))&&t.constructor===Object},getLink:function(t){return t&&t.url?t.url:(alert("Didn`t find link for this action!"),"")},getMethod:function(t){return t&&t.method?t.method.toLowerCase():(alert("Didn`t find method for this action!"),"")},getSuccess:function(t){if(t.onsuccess)return t.onsuccess},setVueRequest:function(t,e,n,a){var i=this,s=this.pagination.page;this.$http[e](t).then(function(t){var e=i;a.forEach(function(t){var n=e.data.indexOf(t);-1!==n&&e.data.splice(n,1)}),e.$http.get(e.dataSource+e.filterStr+"_sort="+e.sortSign+e.column+"&_page="+s).then(function(t){e.data=X()(t.data.data)}),i.setResult(t.data.data)},function(t){i.setResult(t.body)}),this.selected=[]},setResult:function(t){var e="";if(Array.isArray(t)||this.isObject(t))for(var n=0;n<t.length;n++)e+=t[n].toString()+"\n";t=void 0!==t.message?t.message:t.toString(),e.length>0?alert(e):alert(t)},setWindowLink:function(t){return t.type&&"nav"===t.type&&t.linktype&&"window"===t.linktype&&t.link?t.link:""},getSearchable:function(t){var e=this.cells,n=[];e&&e.forEach(function(e){e.field&&e.searchable&&-1===t.indexOf(e.field)&&(e.relation_path?n[e.relationField]="":n[e.field]="")}),this.searchByColumn=ft=n},getNotSearchable:function(){var t=this.metaDataFields,e=[];this.setting.notSearchable&&(e=this.setting.notSearchable),rt()(t).map(function(n,a){switch(t[n].type){case"boolean":case"timestamp":case"decimal":e.push(n);break;case"integer":e.push(n)}}),this.notSearchable=e.filter(this.onlyUnique)},onlyUnique:function(t,e,n){return n.indexOf(t)===e},asyncFind:function(t,e){var n=this.cells,a=this.metaDataRelations,i="&_filters[]=title-lk=*"+t+"*",s=this;n&&a&&t.length>2&&n.forEach(function(t){t.field===e&&t.relation_path&&s.$http.get(t.relation_path+i).then(function(t){if(t.data.data){var e=t.data.data;e.map(function(t){t.title=t.i18n?t.i18n.title:t.title}),s.selectOptions=e}})})},checkRelation:function(t){this.filterBy(t),this.selectOptions=[]}},created:function(){this.init(),this.isLoad=!0}},gt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoad?n("div",{staticClass:"info-table",staticStyle:{overflow:"auto"}},[t.mainSearch?n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"search"},domProps:{value:t.search},on:{keypress:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault(),t.filterBy("all-fields")},input:function(e){e.target.composing||(t.search=e.target.value)}}}):t._e(),n("br"),t._v(" "),t.searchByColumn||t.predefinedFilters?n("button",{on:{click:function(e){t.filterBy("clear-filter")}}},[t._v("Clear Filter")]):t._e(),n("br"),t._v(" "),t.predefinedFilters?n("ul",{staticClass:"predefined-filters"},t._l(t.predefinedFilters,function(e,a){return n("li",{key:a},[n("button",{staticClass:" ",class:{active:t.filterSelected[e.filter]},on:{click:function(n){t.filterBy("predefined-filter",e.filter,t.filterSelected[e.filter])}}},[t._v(t._s(e.i18n.title)+"\r\n\t\t\t")])])})):t._e(),t._v(" "),t.paginate&&t.pages>1?n("div",[n("paginate",{attrs:{"page-count":t.pages,"page-range":5,"margin-pages":5,"click-handler":t.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"}})],1):t._e(),t._v(" "),n("table",[n("thead",[n("tr",[t.setting&&t.setting.selected?n("th",{staticClass:"selected-all"},[n("input",{attrs:{type:"checkbox"},domProps:{checked:0!==t.selected.length},on:{click:t.toggleAll}})]):t._e(),t._v(" "),t._l(t.cells,function(e,a){return e.sortable?n("th",{key:a},[n("span",[e.icon&&"right"!=e.icon.align?n("img",{attrs:{src:e.icon.source}}):t._e(),t._v(" "),n("div",{on:{click:function(n){t.changeSort(e.field)}}},[t.column===e.field&&""!==t.sortSign?n("span",[n("i",{staticClass:"sort-field"},[t._v(" ↑ ")])]):t._e(),t._v(" "),t.column===e.field&&"-"!==t.sortSign?n("span",[n("i",{staticClass:"sort-field"},[t._v(" ↓ ")])]):t._e(),t._v(" "),t.column!==e.field?n("span",[n("i",{staticClass:"sort-field"},[t._v(" ↓ ")])]):t._e(),t._v(" "),n("span",[t._v(t._s(e.label))])]),t._v(" "),e.icon&&"right"==e.icon.align?n("img",{attrs:{src:e.icon.source}}):t._e()]),t._v(" "),e.searchable&&!e.relation_path&&!1===["bool","date"].includes(e.class)?n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchByColumn[e.field],expression:"searchByColumn[cell.field]"}],attrs:{type:"text"},domProps:{value:t.searchByColumn[e.field]},on:{keypress:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;n.preventDefault(),t.filterBy(e.field)},input:function(n){n.target.composing||t.$set(t.searchByColumn,e.field,n.target.value)}}}):t._e(),t._v(" "),e.searchable&&e.relation_path?n("multiselect",{attrs:{placeholder:"Find "+e.field,id:e.field,label:"title","track-by":"id",options:t.selectOptions,"close-on-select":!0},on:{"search-change":t.asyncFind,close:function(n){t.checkRelation(e.relationField)}},model:{value:t.searchByColumn[e.relationField],callback:function(n){t.$set(t.searchByColumn,e.relationField,n)},expression:"searchByColumn[cell.relationField]"}}):t._e(),t._v(" "),n("div",[e.searchable&&["date"].includes(e.class)?n("el-date-picker",{attrs:{type:"daterange","start-placeholder":"start","end-placeholder":"end","default-time":["12:00:00"],"value-format":t.valueformat},on:{change:function(n){t.filterBy(e.field)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1),t._v(" "),e.searchable&&["bool"].includes(e.class)?n("select",{directives:[{name:"model",rawName:"v-model",value:t.searchByColumn[e.field],expression:"searchByColumn[cell.field]"}],staticClass:"select-boolean",on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.searchByColumn,e.field,n.target.multiple?a:a[0])},function(n){t.filterBy(e.field)}]}},[n("option",{attrs:{value:""}},[t._v("all")]),t._v(" "),n("option",{attrs:{value:"1"}},[t._v("active")]),t._v(" "),n("option",{attrs:{value:"0"}},[t._v("inactive")])]):t._e()],1):n("th",[n("span",[e.icon&&"right"!=e.icon.align?n("img",{attrs:{src:e.icon.source}}):t._e(),t._v(" "),n("div",[n("span",[t._v(t._s(e.label))])]),t._v(" "),e.icon&&"right"==e.icon.align?n("img",{attrs:{src:e.icon.source}}):t._e()]),t._v(" "),e.searchable&&!e.relation_path&&!1===["bool","date"].includes(e.class)?n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchByColumn[e.field],expression:"searchByColumn[cell.field]"}],attrs:{type:"text"},domProps:{value:t.searchByColumn[e.field]},on:{keypress:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;n.preventDefault(),t.filterBy(e.field)},input:function(n){n.target.composing||t.$set(t.searchByColumn,e.field,n.target.value)}}}):t._e(),t._v(" "),e.searchable&&e.relation_path?n("multiselect",{attrs:{placeholder:"Find "+e.field,id:e.field,label:"title","track-by":"id",options:t.selectOptions,"close-on-select":!0},on:{"search-change":t.asyncFind,close:function(n){t.checkRelation(e.relationField)}},model:{value:t.searchByColumn[e.relationField],callback:function(n){t.$set(t.searchByColumn,e.relationField,n)},expression:"searchByColumn[cell.relationField]"}}):t._e(),t._v(" "),n("div",[e.searchable&&["date"].includes(e.class)?n("el-date-picker",{attrs:{type:"daterange","start-placeholder":"start","end-placeholder":"end","default-time":["12:00:00"],"value-format":t.valueformat},on:{change:function(n){t.filterBy(e.field)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1),t._v(" "),e.searchable&&["bool"].includes(e.class)?n("select",{directives:[{name:"model",rawName:"v-model",value:t.searchByColumn[e.field],expression:"searchByColumn[cell.field]"}],staticClass:"select-boolean",on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.searchByColumn,e.field,n.target.multiple?a:a[0])},function(n){t.filterBy(e.field)}]}},[n("option",{attrs:{value:""}},[t._v("all")]),t._v(" "),n("option",{attrs:{value:"1"}},[t._v("active")]),t._v(" "),n("option",{attrs:{value:"0"}},[t._v("inactive")])]):t._e()],1)})],2)]),t._v(" "),t._l(t.data,function(e,a){return n("tr",{key:a},[t.setting&&t.setting.selected?n("td",{staticClass:"selected-all",on:{click:function(n){t.toggleItem(e)}}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:-1!==t.selected.indexOf(e)}})]):t._e(),t._v(" "),t._l(t.cells,function(i,s){return i.menus?n("td",{key:s,style:[i.width?{width:i.width}:"",i.align?{"text-align":i.align}:""]},t._l(i.menus,function(a,i){return n("span",{key:i,staticClass:"data-table-action"},t._l(a,function(a,i){return"button"!==a.class?n("span",{key:i},["all"===a.addTo?n("div",[a.action.url?n("a",{staticClass:"data-table-link",on:{click:function(n){t.submit(a.action,e)}}},[t._v(t._s(a.label))]):n("a",{staticClass:"data-table-link",on:{click:function(n){t.towindow(a.action.link,e)}}},[t._v(t._s(a.label))])]):n("div",[a.action.url?n("span",[e[a.addTo.field]===a.addTo.value?n("a",{staticClass:"data-table-link",on:{click:function(n){t.submit(a.action,e)}}},[t._v(" "+t._s(a.label)+" ")]):t._e()]):n("span",[e[a.addTo.field]===a.addTo.value?n("a",{staticClass:"data-table-link",on:{click:function(n){t.towindow(a.action.link,e)}}},[t._v(" "+t._s(a.label)+" ")]):t._e()])])]):n("span",["all"===a.addTo?n("div",[a.action.url?n("span",[n("button",{staticClass:"data-table-btn",on:{click:function(n){t.submit(a.action,e)}}},[t._v(t._s(a.label))])]):n("span",[n("button",{staticClass:"data-table-btn",on:{click:function(n){t.towindow(a.action.link,e)}}},[t._v(t._s(a.label))])])]):n("div",[a.action.url?n("span",[e[a.addTo.field]===a.addTo.value?n("button",{staticClass:"data-table-btn",on:{click:function(n){t.submit(a.action,e)}}},[t._v(t._s(a.label)+" ")]):t._e()]):n("span",[e[a.addTo.field]===a.addTo.value?n("button",{staticClass:"data-table-btn",on:{click:function(n){t.towindow(a.action.link,e)}}},[t._v(t._s(a.label))]):t._e()])])])}))})):n("td",{style:[i.width?{width:i.width}:"",i.align?{"text-align":i.align}:""]},["bool"===i.class?n("div",{class:"bool-"+e[i.field]}):n("div",{staticClass:"input-title"},[i.link?n("a",{staticClass:"data-table-link",on:{click:function(n){t.towindow(i.link,e)}}},[t._v(t._s(t.parseVars(i.field,a,i.class)))]):n("span",[t._v(t._s(t.parseVars(i.field,a,i.class)))])])])})],2)})],2),t._v(" "),t._l(t.groupActions,function(e,a){return t.groupActions&&t.selected?n("span",{key:a,staticClass:"group-actions"},t._l(e,function(e,a){return e.class&&"button"!==e.class?n("div",{key:a,staticStyle:{display:"inline-block"}},[n("a",{staticClass:"data-table-link",on:{click:function(n){t.submitSelected(e.action)}}},[t._v(t._s(e.label))])]):n("div",{staticStyle:{display:"inline-block"}},[n("button",{staticClass:"data-table-btn",on:{click:function(n){t.submitSelected(e.action)}}},[t._v(t._s(e.label))])])})):t._e()}),t._v(" "),t.paginate&&t.pages>1?n("div",[n("paginate",{attrs:{"page-count":t.pages,"page-range":5,"margin-pages":5,"click-handler":t.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"}})],1):t._e()],2):t._e()},staticRenderFns:[]};var vt=n("VU/8")(pt,gt,!1,function(t){n("d6V2"),n("dIkv")},"data-v-56bc7dcb",null).exports,yt={name:"dynamicinput",computed:tt()({returnOptions:function(){return null!=this.options?this.options:{}}},Object(r.b)(["getSchema","getMetaDataErrors"])),data:function(){return{}},mixins:[J],props:{options:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{},methods:{updateValue:function(t){this.setValueToObject(this.value,this.returnOptions.key,t),this.$emit("input",this.value)}}},bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.options.key?n("input",{attrs:{type:"text"},domProps:{value:t.fetchFromObject(t.value,t.options.key)},on:{input:function(e){t.updateValue(e.target.value)}}}):t._e()])},staticRenderFns:[]};var _t=n("VU/8")(yt,bt,!1,function(t){n("T63s")},"data-v-10615989",null).exports;o.default.component("multiselect",dt.a);var kt={name:"dynamicselect",computed:tt()({model:{get:function(){var t=this.selectedItem;return t&&"single"===this.options.metadata.relation.select&&t.id&&!t.label&&(t.label=this.parseVars(t,this.options.metadata.relation.short_view)),t||{}},set:function(t){this.fetchFromObject(this.value,this.options.key.replace(".id","")+"_id")&&this.setValueToObject(this.value,this.options.key.replace(".id","")+"_id",""),this.setValueToObject(this.value,this.returnOptions.key.replace(".id",""),t),this.$emit("input",this.value)}},returnOptions:function(){return null!=this.options?this.options:{}}},Object(r.b)(["getSchema","getMetaDataErrors"])),data:function(){return{items:[],loaded:!1,selectedItem:{}}},mixins:[J],props:{options:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{},methods:{convertItems:function(t){var e=this;return t.map(function(t){return{id:t.id,label:e.parseVars(t,e.returnOptions.metadata.relation.short_view)}})},parseVars:function(t,e){return this.fetchValueByMetaData(t,e,this.returnOptions.entityMetadata)},preloadData:function(){var t=this;if(this.returnOptions.metadata.relation.type){var e=this.returnOptions.metadata;if(e.relation.path){var n=e.relation.path.replace(/^\/|\/$/g,""),a=this;this.$http.get(n).then(function(e){var n=a.convertItems(e.data.data);a.items=n,a.loaded=!0,a.selectedItem=t.fetchFromObject(t.value,t.returnOptions.key.replace(".id",""))})}}}},created:function(){this.preloadData()}},jt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loaded?n("multiselect",{attrs:{options:t.items,trackBy:"id",label:"label"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}):t._e()},staticRenderFns:[]};var St=n("VU/8")(kt,jt,!1,function(t){n("E2SV"),n("W2tg")},"data-v-280e4070",null).exports,Ot={name:"dynamicradio",computed:tt()({returnOptions:function(){return null!=this.options?this.options:0}},Object(r.b)(["getSchema","getMetaDataErrors"]),{model:{get:function(){var t=this.fetchFromObject(this.value,this.returnOptions.key);return t?parseInt(t):0},set:function(t){this.setValueToObject(this.value,this.returnOptions.key,parseInt(t)),console.log(this.value.available_all),this.$emit("input",this.value)}}}),data:function(){return{}},mixins:[J],props:{options:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{},methods:{updateValue:function(t){this.setValueToObject(this.value,this.returnOptions.key,t),this.$emit("input",this.value)}}},Dt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.options.key?n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],attrs:{type:"radio",id:t.options.key+"1",name:t.options.key,value:"1"},domProps:{checked:t._q(t.model,"1")},on:{change:function(e){t.model="1"}}}):t._e(),t._v(" "),n("label",{attrs:{for:t.options.key+"1"}},[t._v("True")]),t._v(" "),t.options.key?n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],attrs:{type:"radio",id:t.options.key+"2",name:t.options.key,value:"0"},domProps:{checked:t._q(t.model,"0")},on:{change:function(e){t.model="0"}}}):t._e(),t._v(" "),n("label",{attrs:{for:t.options.key+"2"}},[t._v("False")])])},staticRenderFns:[]};var Ct=n("VU/8")(Ot,Dt,!1,function(t){n("B85T")},"data-v-7611d56b",null).exports,Et={name:"dynamictextarea",computed:tt()({returnOptions:function(){return null!=this.options?this.options:{}}},Object(r.b)(["getSchema","getMetaDataErrors"])),data:function(){return{}},mixins:[J],props:{options:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{},methods:{updateValue:function(t){this.setValueToObject(this.value,this.returnOptions.key,t),this.$emit("input",this.value)}}},xt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.options.key?n("textarea",{domProps:{value:t.fetchFromObject(t.value,t.options.key)},on:{input:function(e){t.updateValue(e.target.value)}}}):t._e()},staticRenderFns:[]};var It=n("VU/8")(Et,xt,!1,function(t){n("JFZg")},"data-v-531ed0ea",null).exports,wt={name:"dynamicbutton",mixins:[J],computed:{getSchema:function(){return null!=this.schema?this.schema:{}},getValue:function(){return null!=this.value?this.value:{}}},data:function(){return{}},props:{schema:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{},methods:{makeAction:function(){var t=this.getSchema;if(t.action&&t.action.type)switch(t.action.type){case"submit":this.actionSubmit();break;case"request":this.actionRequest()}},parseUrlParams:function(t,e){var n=this,a=this.matchVariables(e),i=e;return a&&a.forEach(function(e){var a=n.fetchFromObject(t,e.replace("$",""));a&&(i=i.replace(e,a))}),i},actionSubmit:function(){var t=this.getSchema;if(!t.action.url)return console.log("Action url not set for submit!"),null;var e=this;this.convertDataBeforeSend(this.getValue),this.$http[t.action.method.toLowerCase()](this.parseUrlParams(this.getValue,t.action.url),this.getValue).then(function(n){e.afterEvent(t.action.onsuccess,n)},function(t){alert(t.data.message)})},actionRequest:function(){var t=this.getSchema;if(!t.action.url)return console.log("Action url not set for submit!"),null;var e=this.parseUrlParams(this.getValue,t.action.url),n=this;this.$http[t.action.method.toLowerCase()](e).then(function(e){n.afterEvent(t.action.onsuccess,e)})},ReplaceParameterFromUrl:function(t,e,n){return t.replace(new RegExp("[?&]"+e+"=[^&#]*(#.*)?$"),"/"+n).replace(new RegExp("([?&])"+e+"=[^&]*&"),"/"+n)},afterEvent:function(t,e){if("nav"===t.type){if("window"===t.linktype){if(!t.link)return null;var n=t.link;t.link.indexOf("result")>-1&&t.link.indexOf("?")>-1&&(n=this.ReplaceParameterFromUrl(t.link,"id",this.fetchFromObject(e.data.data,"id"))),this.$router.push({path:"/page/"+n})}}else console.log("another")},parseResponseParams:function(t,e){console.log()}}},Rt={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{attrs:{type:"button"},on:{click:function(e){t.makeAction()}}},[t._v(t._s(t.schema.value))])},staticRenderFns:[]};var Tt=n("VU/8")(wt,Rt,!1,function(t){n("Fo+e")},"data-v-10a64359",null).exports;o.default.component("multiselect",dt.a);var Ft={name:"dynamictable",computed:tt()({model:{get:function(){var t=this.selectedItems;return t||[]},set:function(t){this.setValueToObject(this.value,this.returnOptions.key.replace(".id",""),t),t.length>0&&(this.selectedItems=t),this.$emit("input",this.value)}},returnOptions:function(){return null!=this.options?this.options:{}}},Object(r.b)(["getSchema","getMetaDataErrors"])),data:function(){return{isLoading:!1,items:[],loaded:!1,selectedItems:[],fields:{input:"input",decimal:"input",i18n:"input",string:"input",boolean:"radio",text:"textarea",label_i18n:"label",label:"label"}}},mixins:[J],props:{options:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{dynamicbutton:Tt,dynamiclabel:Z,dynamicinput:_t,dynamicselect:St,dynamicradio:Ct,dynamictextarea:It},methods:{limitText:function(t){return"and "+t+" other items"},asyncFind:function(t){var e=this;if(!t.length||t.length<2)return null;var n=this.generateSearchPath(t,this.returnOptions.metadata.relation);this.isLoading=!0,this.$http.get(n).then(function(t){e.items=e.convertItems(t.data.data),e.isLoading=!1})},clearAll:function(){this.items=[]},parseVars:function(t,e){return this.fetchValueByMetaData(t,e,this.returnOptions.entityMetadata)},generateSearchPath:function(t,e){var n=e.path,a=e.short_view,i=this.matchVariables(a);return 0===i.length?n:(n=n.replace(/^\/|\/$/g,""),n+="?_filters[]=",i.forEach(function(e){n.indexOf("-lk")>-1&&(n+="-!or!-"),n+=e.replace("$","")+"-lk=*"+t+"*"}),n)},convertItems:function(t){var e=this;if(0===t.length)return[];if(!(t instanceof Array)){var n=t;return n.label=e.parseVars(n,this.returnOptions.metadata.relation.short_view),n}return t.map(function(t){var n=t;return n.label=e.parseVars(t,e.returnOptions.metadata.relation.short_view),n})},getType:function(t){return t&&this.fields[t]?this.fields[t]:"input"},getOptions:function(t,e,n){var a={};return"relation"===t.type&&this.returnOptions.entityMetadata.relations[e]&&(a=this.returnOptions.entityMetadata.relations[e]),{metadata:{field:t,relation:a},entityMetadata:this.returnOptions.entityMetadata,type:t.type,key:this.returnOptions.key.replace(".id","")+"."+n+"."+e}}},created:function(){if(this.value.id){this.selectedItems=this.fetchFromObject(this.value,this.returnOptions.key.replace(".id",""));var t=this.convertItems(this.selectedItems);this.items=t instanceof Array?t:[t],this.setValueToObject(this.value,this.returnOptions.key.replace(".id",""),t)}this.loaded=!0}},Mt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loaded?n("multiselect",{attrs:{multiple:"multiple"===t.options.metadata.relation.select,options:t.items,trackBy:"id",label:"label","open-direction":"bottom",searchable:!0,loading:t.isLoading,"internal-search":!1,"clear-on-select":!0,"close-on-select":!0,"options-limit":300,"show-no-results":!1,"hide-selected":!0},on:{"search-change":t.asyncFind},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}):t._e(),t._v(" "),"multiple"===t.options.metadata.relation.select?n("div",{staticClass:"select-table"},t._l(t.selectedItems,function(e,a){return n("div",{key:a,staticClass:"list-items"},t._l(t.options.metadata.relation.fields,function(e,i){return n("div",{key:i,staticClass:"item-field"},[n("b",[t._v(t._s(e.label))]),t._v(" "),n("dynamic"+t.getType(e.type),{tag:"component",attrs:{options:t.getOptions(e,i,a)},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)}))})):t._e()],1)},staticRenderFns:[]};var Vt=n("VU/8")(Ft,Mt,!1,function(t){n("jiim"),n("qVS0")},"data-v-4da9707a",null).exports,$t=(n("tvR6"),n("wUZ8")),At=n.n($t),Ut=n("urW8");n.n(Ut).a.use(At.a),o.default.use(ht.DatePicker),o.default.use(ht.TimeSelect),o.default.use(ht.TimePicker);var Pt={name:"dynamicdatetime",computed:tt()({model:{get:function(){var t=this.fetchFromObject(this.value,this.options.key);return t||""},set:function(t){this.setValueToObject(this.value,this.options.key,t),this.$emit("input",this.value)}},returnOptions:function(){return null!=this.options?this.options:""}},Object(r.b)(["getSchema","getMetaDataErrors"])),data:function(){return{valueformat:"yyyy-MM-dd HH:mm:ss",type:"datetime"}},mixins:[J],props:{options:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},components:{},methods:{getType:function(){var t=this.returnOptions.metadata.field.type;"date"===t||"datetime"===t?this.type=t:this.valueformat="timestamp"},updateValue:function(t){this.setValueToObject(this.value,this.returnOptions.key,t),this.$emit("input",this.value)}},construct:function(){}},Lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-date-picker",{attrs:{type:t.type,placeholder:"Select date and time","value-format":t.valueformat},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)},staticRenderFns:[]};var Bt=n("VU/8")(Pt,Lt,!1,function(t){n("cEJ0")},"data-v-65db5c47",null).exports,Nt={name:"dynamicform",mixins:[J],computed:tt()({returnSchema:function(){return null!=this.schema?this.schema:{}},getId:function(){return null!=this.selected?this.selected:0}},Object(r.b)(["getMetaData","getDynamicUIData"])),data:function(){return{loaded:!1,data:{},metaData:[],entities:{},fields:{input:"input",decimal:"input",i18n:"input",string:"input",boolean:"radio",text:"textarea",datetime:"datetime"}}},props:{value:{type:String,default:""},schema:{type:Object,default:function(){return{}}},selected:{type:String,default:"0"}},components:{dynamiclabel:Z,dynamicinput:_t,dynamicselect:St,dynamicradio:Ct,dynamictextarea:It,dynamicbutton:Tt,dynamictable:Vt,dynamicdatetime:Bt},methods:{updateValue:function(t){this.data.i18n.title=t},changeDataSource:function(t){return t.replace("$id",this.getId)},preload:function(){var t=this,e=this;if(!this.returnSchema.root["data-source"])return this.initObject(),null;for(var n in this.returnSchema.root["data-source"])e.entities.main=n,this.$store.dispatch("getWindowMetaData",n).then(function(){e.$http.get(e.changeDataSource(t.returnSchema.root["data-source"][n])).then(function(t){t.data.data[0]&&(e.data=t.data.data[0],e.loaded=!0)})})},initObject:function(){var t=this,e=this.returnSchema.root,n=e.children,a="",i=this;rt()(e.children).map(function(t){var e=n[t];if("input"===e.type){var i=e.field.substring(0,e.field.indexOf("."));a||(a=i)}}),this.$store.dispatch("getWindowMetaData",a).then(function(){X()(e.children).map(function(e){"input"===e.type&&(i.generateEmptyObject(t.data,e.field,i.getMetaData[a]),i.loaded=!0)})})},generateType:function(t){if(!t.field)return"input";var e=t.field.substring(0,t.field.indexOf(".")),n=t.field;n=n.substring(n.indexOf(".")+1);var a=this.fetchFromObject(this.getMetaData[e].fields,n);return a?"relation"===a.type?this.fetchFromObject(this.getMetaData[e].relations,n).type:this.fields[a.type]:"input"},getFieldOptions:function(t){var e=t.field.substring(0,t.field.indexOf(".")),n=t.field;n=n.substring(n.indexOf(".")+1);var a=this.getMetaData[e],i="";i=t.value?t.value:t.field;var s={metadata:{field:this.fetchFromObject(a.fields,n),relation:this.fetchFromObject(a.relations,n)},entityMetadata:a,type:this.fetchFromObject(a.fields,n).type,key:this.searchProperty(this.data,i.replace("$",""))};if("i18n"===s.metadata.field.type&&-1===s.key.indexOf("i18n")&&(s.key="i18n."+s.key),"relation"!==s.metadata.field.type||"single"!==s.metadata.field.select||this.fetchFromObject(this.data,s.key)){if("relation"===s.metadata.field.type&&"multiple"===s.metadata.field.select&&!this.fetchFromObject(this.data,s.key)){var o=s.key.substring(0,s.key.indexOf("."));this.data[o]=[]}}else{var r=s.key.substring(0,s.key.indexOf("."));this.data[r]={}}return s}},created:function(){this.preload()}},zt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loaded?n("div",{staticClass:"entity-form"},t._l(t.schema.root.children,function(e,a){return n("div",{key:a,staticClass:"child"},["label"==e.type&&"button"!==e.class?n("dynamiclabel",{tag:"component",attrs:{schema:e}}):t._e(),t._v(" "),"input"==e.type?n("dynamic"+t.generateType(e),{tag:"component",attrs:{options:t.getFieldOptions(e)},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}):t._e(),t._v(" "),"label"==e.type&&"button"==e.class?n("dynamicbutton",{tag:"component",attrs:{schema:e},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}):t._e()],1)})):t._e()},staticRenderFns:[]};var qt=n("VU/8")(Nt,zt,!1,function(t){n("SML6")},"data-v-22cc8d46",null).exports,Wt={name:"dynamicBody",computed:{returnSchema:function(){return null!=this.schema?this.schema:{}},returnId:function(){if(null!=this.id)return this.id}},data:function(){return{}},props:{schema:{type:Object,default:function(){return{}}},id:{type:String,default:"0"}},components:{dynamicform:qt,dynamiclabel:Z,dynamicentitylist:at,dynamicentitytable:vt,dynamicinput:_t,dynamicselect:St,dynamicbutton:Tt,dynamicdatetime:Bt},methods:{},created:function(){}},Gt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.schema.root&&"VerticalList"==t.schema.root.layout.type?n("div",{staticClass:"root",style:{width:t.schema.root.width,height:t.schema.root.height}},[t._l(t.schema.root.children,function(e,a){return t.schema.root["data-source"]||t.schema.root.children.submit?t._e():n("div",{key:a,staticClass:"child"},[n("dynamic"+e.type,{tag:"component",attrs:{schema:e}})],1)}),t._v(" "),t.schema.root["data-source"]||t.schema.root.children.submit?n("dynamicform",{attrs:{schema:t.schema,selected:t.id}}):t._e()],2):t._e()},staticRenderFns:[]};var Ht=n("VU/8")(Wt,Gt,!1,function(t){n("fAeK")},"data-v-30a1107c",null).exports,Xt={name:"WindowUI",computed:Object(r.b)(["getSchema","getMetaDataErrors"]),data:function(){return{}},components:{dynamicMenu:q,dynamicBody:Ht},props:{entity:{type:String,default:""},id:{type:String,default:"0"}},created:function(){},methods:{},watch:{$route:function(){this.$store.dispatch("setCurrentWindow",this.entity)}}},Jt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.getSchema,function(e,a){return n("div",{key:a,staticClass:"page"},[n("header",[e.title?n("h4",[t._v(t._s(e.title))]):t._e(),t._v(" "),t._l(e.menus,function(t,e){return n("dynamicMenu",{key:e,attrs:{schema:t}})})],2),t._v(" "),n("main",[n("dynamicBody",{attrs:{schema:e.elements,id:t.id}})],1),t._v(" "),n("div",{staticClass:"schema"},[n("pre",[t._v(t._s(e))])])])}))},staticRenderFns:[]};var Kt=n("VU/8")(Xt,Jt,!1,function(t){n("rCBN")},"data-v-6650ba24",null).exports,Yt={name:"DynamicUI",computed:Object(r.b)(["getSchema","getMetaDataErrors"]),data:function(){return{content:"Try dynamic UI"}},props:{entity:{type:String,default:""},id:{type:String,default:"0"}},components:{windowUI:Kt},methods:{},created:function(){this.$store.dispatch("setCurrentWindow",this.entity)}},Zt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"page"},[this.getSchema?e("windowUI",{attrs:{schema:this.getSchema,id:this.id,entity:this.entity}}):this._e()],1)])},staticRenderFns:[]};var Qt=n("VU/8")(Yt,Zt,!1,function(t){n("acqJ")},"data-v-be30fe06",null).exports,te=(n("l333"),n("PJh5")),ee=n.n(te),ne={methods:{moment:function(t){return ee()(t)},loadRooms:function(t,e){var n={event:"getRooms",data:{page:t,limit:e}};this.$socket.json.send(n)},loadEmployees:function(t,e){var n={event:"getEmployees",data:{page:t,limit:e}};this.$socket.json.send(n)},setupEmployeeRoom:function(t){var e={event:"setupEmployeeRoom",data:{employeeID:t}};this.$socket.json.send(e)},joinRoom:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log(t),e=null!==n?{event:"joinChatRoom",data:{roomID:t,employeeID:n}}:{event:"joinChatRoom",data:{roomID:t}},this.$socket.json.send(e),this.currentRoomID=t,this.messages=[]},createRoom:function(){var t={event:"createRoom",data:{title:this.roomNameInput}};this.$socket.json.send(t)},leaveRoom:function(t,e){var n={event:"leaveRoom",data:{roomID:t}};this.$socket.json.send(n)},deleteRoom:function(t,e){var n={event:"deleteRoom",data:{roomID:t}};this.$socket.json.send(n),this.roomArrayIndex=e},showRoomMessages:function(t,e,n){var a={event:"showRoomMessages",data:{roomID:t,page:e,limit:n}};this.$socket.json.send(a)},displayRooms:function(t){var e;for(e=0;e<t.length;e++)this.rooms.push({roomID:t[e].room_id,title:t[e].title,data:t[e]});t.length>=1&&this.currentRoomPage++,console.log("Current rooms page "+this.currentRoomPage);var n=this;setTimeout(function(){var t=n.$refs.roomcontainer;t.scrollTop=t.scrollHeight},50)},displayEmployees:function(t){var e;for(e=0;e<t.length;e++)this.employees.push({roomID:t[e].room_id,userID:t[e].user_id,data:t[e]});t.length>=1&&this.currentEmployeePage++,console.log("Current employee page "+this.currentEmployeePage);var n=this;setTimeout(function(){var t=n.$refs.employeecontainer;t.scrollTop=t.scrollHeight},50)},displayMessages:function(t){var e;for(t.reverse(),e=0;e<t.length;e++)this.messages.push({guest:t[e].guest,user:t[e].user,message:t[e],created:this.moment(t[e].created_at).fromNow()});var n=this;setTimeout(function(){var t=n.$refs.msgcontainer;t.scrollTop=t.scrollHeight},50)},sendMessage:function(){if(0!==this.currentRoomID){var t={event:"sendMessageRoom",data:{roomID:this.currentRoomID,message:this.messageInput}};this.$socket.json.send(t)}else this.$notify({group:"chat",type:"error",duration:5e3,title:"System",text:"Can't send a message , because you are not in room"})},pageState:function(t){this.visiblePage="visible"===t},updateUnreadMessagesCounter:function(t,e,n){var a=this;switch(t){case"employee":this.employees.map(function(t,i){parseInt(t.roomID)===parseInt(e.roomID)&&parseInt(t.userID)===parseInt(e.userID)&&(!0===n?a.employees[i].data.unread+=1:a.employees[i].data.unread=0)});break;case"room":this.rooms.map(function(t,i){parseInt(t.roomID)===parseInt(e.roomID)&&(!0===n?a.rooms[i].data.unread+=1:a.rooms[i].data.unread=0)})}},updateUnreadCounter:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(t){case"employee":var a={roomID:e,userID:n};this.updateUnreadMessagesCounter(t,a,!1);break;case"room":var i={roomID:e};this.updateUnreadMessagesCounter(t,i,!1);break;default:console.log("undefined update unread")}}}},ae={methods:{processEvents:function(t){switch(t.eventName){case"roomLeft":this.roomLeft(t);break;case"roomDeleted":this.roomDeleted(t);break;case"roomCreated":this.roomCreated(t);break;case"newContact":this.newContact(t);break;default:console.log(" default callback ")}},roomLeft:function(t){var e={roomID:t.room.id,userID:t.user.id};this.updateUnreadMessagesCounter("room",e,!1)},roomDeleted:function(t){!0===t.message.status.room&&this.$delete(this.rooms,this.roomArrayIndex)},roomCreated:function(t){null!==t.room.id&&(this.currentRoomPage=1,this.rooms=[],this.loadRooms(this.currentRoomPage,1))},newContact:function(t){null!==t.room.id&&(this.currentEmployeePage=1,this.employees=[],this.loadEmployees(this.currentEmployeePage,1))},sendEventUserID:function(){var t={event:"sendEventUserID",data:{userID:this.eventuser}};this.$socket.json.send(t)}}},ie={methods:{notifyUser:function(t){if(parseInt(t.roomID)!==parseInt(this.currentRoomID)||!1===this.visiblePage)if(!0===this.visiblePage?this.$notify({group:"chat",type:!1===t.status?"error":"success",duration:500,title:"System !",text:t.message}):this.$notification.show("Notify",{body:t.message,icon:"https://d30y9cdsu7xlg0.cloudfront.net/png/65535-200.png"},{}),!1===t.default){if(console.log("is default"),!0===t.roomEvent){var e={roomID:t.roomID,userID:t.userID};this.updateUnreadMessagesCounter("employee",e,!0)}}else if(!0===t.roomEvent){var n={roomID:t.roomID,userID:t.userID};this.updateUnreadMessagesCounter("room",n,!0)}}}},se=n("DmT9"),oe=n.n(se),re=n("hMcO"),le=n.n(re),ce=n("YpN1"),ue=n("TYWu"),de=n.n(ue),he=n("CLX7"),me=n.n(he),fe=oe()("https://dev.evrica.io:8085",{reconnection:!1});o.default.use(le.a,fe),o.default.use(mt.a),o.default.use(me.a),o.default.use(ce.a,{requestOnNotify:!0}),o.default.use(de.a);var pe={computed:Object(r.b)(["getToken"]),name:"Chat",data:function(){return{token:"",rooms:[],employees:[],currentRoomPage:1,currentEmployeePage:1,currentMessagePage:1,currentRoomID:0,messages:[],messageInput:"Hello ?",roomNameInput:"#hobbies",showRoomInput:!1,eventuser:3,visiblePage:!0,updateListEmployees:!1,showModal:!1,roomArrayIndex:null,dialogVisible:!1}},mixins:[ne,ae,ie,{methods:{handleClose:function(t){this.$confirm("Are you sure to close this dialog?").then(function(e){t()}).catch(function(t){})}}}],components:{},watch:{},sockets:{connect:function(){console.log("socket connected")},message:function(t){console.log(t),void 0!==t.data.notification?this.notifyUser(t.data.notification):void 0!==t.data.customEvent?this.processEvents(t.data.customEvent):"auth"===t.event?(this.loadRooms(this.currentRoomPage,1),this.loadEmployees(this.currentEmployeePage,1)):"getRooms"===t.event?this.displayRooms(t.data.message.rooms):"getEmployees"===t.event?this.displayEmployees(t.data.message.employees):"joinChatRoom"===t.event?!0===t.data.message.showMessages&&parseInt(this.currentRoomID)===parseInt(t.data.message.roomID)&&fe.id===t.data.message.connection&&this.showRoomMessages(t.data.message.roomID,this.currentMessagePage,15):"showRoomMessages"===t.event?this.displayMessages(t.data.message.message):"sendMessageRoom"===t.event&&parseInt(t.data.message.roomID)===parseInt(this.currentRoomID)&&this.displayMessages(t.data.message.message)}},mounted:function(){},created:function(){this.token=this.getToken;var t={event:"auth",data:{token:this.token}};this.$socket.json.send(t);var e=this;de.a.change(function(t,n){document.title=n,e.pageState(n)})},methods:{notify:function(){this.$notification.show("Notify",{body:"This is an example!",icon:"https://d30y9cdsu7xlg0.cloudfront.net/png/65535-200.png"},{})}}},ge={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat"},[n("span",{staticClass:"pageTitle"},[t._v("Chat")]),n("button",{staticClass:"createRoomBtn",on:{click:function(e){t.showRoomInput=!t.showRoomInput}}},[t._v("Create room")]),t._v(" "),n("button",{attrs:{type:"button"},on:{click:t.notify}},[t._v("Show notification")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("click to open the Dialog")]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showRoomInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.roomNameInput,expression:"roomNameInput"}],staticClass:"roomNameInput",domProps:{value:t.roomNameInput},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.createRoom()},input:function(e){e.target.composing||(t.roomNameInput=e.target.value)}}}):t._e()]),t._v(" "),n("button",{staticClass:"createRoomBtn",on:{click:function(e){t.sendEventUserID()}}},[t._v("Send Event")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.eventuser,expression:"eventuser"}],attrs:{value:"3",placeholder:"user id"},domProps:{value:t.eventuser},on:{input:function(e){e.target.composing||(t.eventuser=e.target.value)}}}),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"three columns col-left"},[n("div",{ref:"roomcontainer",staticClass:"scroll-rooms"},[t._l(t.rooms,function(e,a){return n("div",{key:a},[n("div",[n("button",{on:{click:function(n){t.joinRoom(e.roomID),t.updateUnreadCounter("room",e.roomID)}}},[t._v(t._s(e.title)+"\r\n      "),n("span",{staticClass:"unread-badge"},[t._v(t._s(e.data.unread))])]),t._v(" "),n("button",{staticClass:"btn-leave",on:{click:function(n){t.leaveRoom(e.roomID,a)}}},[t._v("⇢")]),t._v(" "),n("button",{staticClass:"btn-del",on:{click:function(n){t.deleteRoom(e.roomID,a)}}},[t._v("x")])])])}),t._v(" "),n("button",{on:{click:function(e){t.loadRooms(t.currentRoomPage,1)}}},[t._v("Load More")])],2)]),t._v(" "),n("div",{staticClass:"six columns col-left"},[n("div",{ref:"msgcontainer",staticClass:"messages-container"},t._l(t.messages,function(e,a){return n("div",{key:a},[1===e.message.is_notification?n("div",[n("div",{staticClass:"system-message-body"},[n("span",{staticClass:"system-message"},[t._v("System: ")]),n("span",[t._v(t._s(e.message.message))])])]):n("div",[n("div",{staticClass:"message-box"},[null!=e.user?n("div",[n("span",{staticClass:"message-username"},[t._v(t._s(e.user.firstname))]),n("sup",[n("span",{staticClass:"message-time"},[t._v(t._s(e.created))])])]):n("div",[null!=e.guest.name?n("span",{staticClass:"message-username"},[t._v(t._s(e.guest.name))]):n("span",{staticClass:"message-username"},[t._v("Guest #"+t._s(e.guest.id))]),t._v(" "),n("sup",[n("span",{staticClass:"message-time"},[t._v(t._s(e.created))])])]),t._v(" "),n("div",{staticClass:"message-body"},[t._v(t._s(e.message.message))])])])])})),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.messageInput,expression:"messageInput"}],staticClass:"u-full-width textarea-input",attrs:{placeholder:"Your message here …"},domProps:{value:t.messageInput},on:{input:function(e){e.target.composing||(t.messageInput=e.target.value)}}}),t._v(" "),n("br"),t._v(" "),n("button",{on:{click:function(e){t.sendMessage()}}},[t._v("Send")])]),t._v(" "),n("div",{staticClass:"three columns"},[n("div",{ref:"employeecontainer",staticClass:"scroll-employees"},[t._l(t.employees,function(e,a){return n("div",{key:a},["0"===e.data.room_id?n("button",{on:{click:function(n){t.joinRoom(e.data.room_id,e.data.user_id)}}},[t._v("\r\n  "+t._s(e.data.firstname)+" "+t._s(e.data.lastname)+"\r\n  ")]):n("button",{on:{click:function(n){t.joinRoom(e.data.room_id),t.updateUnreadCounter("employee",e.roomID,e.userID)}}},[t._v(t._s(e.data.firstname)+" "+t._s(e.data.lastname)+"\r\n      "),n("span",{staticClass:"unread-badge"},[t._v(t._s(e.data.unread))])])])}),t._v(" "),n("button",{on:{click:function(e){t.loadEmployees(t.currentEmployeePage,1)}}},[t._v("Load More")])],2)])]),t._v(" "),n("notifications",{attrs:{group:"chat"}}),t._v(" "),n("el-dialog",{attrs:{title:"Tips",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("span",[t._v("This is a message")]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("Confirm")])],1)])],1)},staticRenderFns:[]};var ve={name:"Chat",data:function(){return{}},components:{chat:n("VU/8")(pe,ge,!1,function(t){n("evUX")},"data-v-6bcfa602",null).exports},created:function(){}},ye={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("chat")],1)},staticRenderFns:[]};var be=n("VU/8")(ve,ye,!1,function(t){n("DoCE")},"data-v-3ef90420",null).exports;o.default.use(m.a);var _e,ke,je,Se=new m.a({routes:[{path:"/",name:"Main",component:E},{path:"/auth",name:"Auth",component:_},{path:"/chat",name:"Chat",component:be},{path:"/settings",name:"Settings",component:B},{path:"/page/:entity",component:Qt,props:!0},{path:"/page/:entity/:id",component:Qt,props:!0}]}),Oe=n("8+8L"),De="SET_ACCESS_TOKEN",Ce="SET_AUTH_ERROR",Ee="CLEAR_ACCESS_TOKEN",xe="ADD_AUTH_ERRORS",Ie="GET_ALL_SETTINGS",we="GET_METADATA_SETTINGS",Re="UPDATE_ALL_SETTINGS",Te="SET_CURRENT_LANGUAGE",Fe="GET_LANGUAGES_LIST",Me="SET_CURRENT_WINDOW",Ve="SET_WINDOW_SCHEMA",$e="SET_DYNAMIC_ERROR",Ae="SET_META_DATA",Ue="GET_ENTITY_DATA",Pe=function(t,e){t.commit;console.log(a)},Le=function(t){return"hello"},Be=n("bOdI"),Ne=n.n(Be),ze={state:{token:null,error:{message:"",code:0,app_code:0},is_error:!1,authorized:!1},getters:{getToken:function(t){return t.token},getAuthHeader:function(t){return{header:"Authorization",value:"Bearer "+t.token}},auth_error:function(t){return t.error},is_error:function(t){return t.is_error},authorized:function(t,e){return t.authorized}},actions:{auth:function(t,e){var n=t.commit;t.dispatch;return O("auth",e).then(function(t){n(De,t.token)}).catch(function(t){n(Ce,t)})},clearToken:function(t){(0,t.commit)(Ee)},logout:function(t){(0,t.commit)(Ee)},addAuthError:function(t,e){(0,t.commit)(Ce,e)},afterSuccessAuth:function(t){t.commit;(0,t.dispatch)("getSettings",null,{root:!0})}},mutations:(_e={},Ne()(_e,De,function(t,e){t.token=e,t.authorized=!0,t.is_error=!1,t.authorized&&(o.default.http.headers.common.Authorization="Bearer "+t.token)}),Ne()(_e,Ce,function(t,e){e.body&&(t.error={message:e.body.message?e.body.message:"",code:e.status,app_code:e.body.app_code?e.body.app_code:0}),t.authorized=!1,t.is_error=!0}),Ne()(_e,Ee,function(t){t.token=null,t.is_error=!1,t.error={message:"",code:0,app_code:0},t.authorized=!1}),_e)},qe={state:{allSettings:null,metadataSettings:null,languages:null,language:null},getters:{allSettings:function(t){return t.allSettings},metadataSettings:function(t){return t.metadataSettings},getLanguage:function(t){return t.language},getAvailableLanguages:function(t){return t.languages}},actions:{getSettings:function(t,e){var n=t.commit;return S("company/settings").then(function(t){n(Ie,t)})},getSettingsMetaData:function(t,e){var n=t.commit;return S("metadata/Settings").then(function(t){n(we,t)})},updateSettings:function(t,e){var n=t.commit;return O("company/settings",e).then(function(t){n(Re,e)})},getCurrentLanguage:function(t,e){var n=t.commit;return S("user/settings/language").then(function(t){n(Te,t)})},setCurrentLanguage:function(t,e){var n=t.commit;return O("user/settings",e).then(function(t){n(Te,e)})},getLanguagesList:function(t,e){var n=t.commit;return S("language").then(function(t){n(Fe,t)})}},mutations:(ke={},Ne()(ke,Ie,function(t,e){t.allSettings=e}),Ne()(ke,we,function(t,e){t.metadataSettings=e}),Ne()(ke,Re,function(t,e){t.allSettings=e}),Ne()(ke,Fe,function(t,e){t.languages=e}),Ne()(ke,Te,function(t,e){if(e.language){if(t.languages){var n=t.languages.filter(function(t){return parseInt(t.id)===parseInt(e.language)});n[0]&&(t.language=n[0])}}else t.language=0;if(t.language.code){var a=t.language.code+";q=0.9;";o.default.http.headers.common["Accept-Language"]=a}}),ke)},We={state:{window:null,schema:null,metadata:{},data:{},dynamicUIErorrs:[]},getters:{getWindow:function(t){return t.window},getSchema:function(t){return t.schema},getMetaData:function(t){return t.metadata},getMetaDataEntity:function(t){return function(e){return void 0!==e&&t.metadata?t.metadata[e]:{}}},getMetaDataErrors:function(t){return t.dynamicUIErorrs},getDynamicUIData:function(t){return t.data}},actions:{setCurrentWindow:function(t,e){var n=t.commit,a=t.dispatch;n(Me,e),a("getWindowSchema",e,{root:!0})},getWindowSchema:function(t,e){var n=t.commit;t.dispatch;return S("window/"+e+"/"+window.innerWidth).then(function(t){n(Ve,t)},function(t){n($e,t)})},getWindowMetaData:function(t,e){var n=t.commit;t.dispatch;return S("metadata/"+e).then(function(t){n(Ae,{data:t,entity:e})})},getWindowData:function(t,e){var n=t.commit,a=t.dispatch;return e.path&&e.entity?S(e.path).then(function(t){n(Ue,{data:t,entity:e.entity}),a("getWindowMetaData",e.entity)},function(t){n($e,t)}):null}},mutations:(je={},Ne()(je,Me,function(t,e){t.window=e}),Ne()(je,Ve,function(t,e){e.metadata&&(t.schema=JSON.parse(e.metadata))}),Ne()(je,$e,function(t,e){t.dynamicUIErorrs.push(e)}),Ne()(je,Ae,function(t,e){t.metadata[e.entity]=e.data[e.entity]}),Ne()(je,Ue,function(t,e){t.data[e.entity]=e.data}),je)},Ge=n("424j");o.default.use(r.a);var He=new r.a.Store({actions:i,getters:s,modules:{auth:ze,settings:qe,dynamicUI:We},strict:!1,plugins:[Object(Ge.a)({secure:!0})]}),Xe={routes:["Auth"]};if(o.default.use(f),o.default.use(r.a),o.default.use(Oe.a),o.default.http.options.root="http://localhost/backend/api",He.getters.authorized&&(o.default.http.headers.common.Authorization="Bearer "+He.getters.getToken,He.getters.getLanguage)){var Je=He.getters.getLanguage.code+";q=1;";o.default.http.headers.common["Accept-Language"]=Je}o.default.config.productionTip=!1,Se.beforeEach(function(t,e,n){return Xe.routes.indexOf(t.name)>-1?(n(),!0):He.getters.authorized&&He.getters.getToken?void n():(Se.push("auth"),!1)}),o.default.http.interceptors.push(function(t,e){e(function(t){400!==t.status&&401!==t.status||t.body.app_code&&He.dispatch("addAuthError",t).then(function(){Se.push("auth")})})}),new o.default({el:"#app",store:He,router:Se,template:"<App/>",components:{App:h}})},PssV:function(t,e){},SML6:function(t,e){},T63s:function(t,e){},W2tg:function(t,e){},a45g:function(t,e){},acqJ:function(t,e){},cEJ0:function(t,e){},d6V2:function(t,e){},dIkv:function(t,e){},evUX:function(t,e){},fAeK:function(t,e){},fSLv:function(t,e){},jiim:function(t,e){},l333:function(t,e){},qVS0:function(t,e){},rCBN:function(t,e){},tvR6:function(t,e){},uslO:function(t,e,n){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return n(s(t))}function s(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(a)},i.resolve=s,t.exports=i,i.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.b4a89ff9b3885d35372c.js.map